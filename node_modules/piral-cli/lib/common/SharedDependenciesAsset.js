"use strict";
const Bundler = require("parcel-bundler");
const hash_1 = require("./hash");
class SharedDependenciesAsset extends Bundler.Asset {
    constructor(name, options) {
        super(name, options);
        const externals = (process.env.SHARED_DEPENDENCIES || '').split(',');
        const deps = externals.map(name => `deps['${name}']=require('${name}')`);
        const code = deps.join(';');
        this.type = 'js';
        this.content = `module.exports = function(deps){${code}}`;
    }
    load() { }
    generate() {
        return [
            {
                type: 'js',
                value: this.content,
            },
        ];
    }
    generateHash() {
        return Promise.resolve(hash_1.computeMd5(this.content));
    }
}
module.exports = SharedDependenciesAsset;
//# sourceMappingURL=SharedDependenciesAsset.js.map